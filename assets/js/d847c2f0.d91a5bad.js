"use strict";(self.webpackChunktypegoose_website=self.webpackChunktypegoose_website||[]).push([[1093],{5680:(e,n,t)=>{t.d(n,{xA:()=>g,yg:()=>d});var a=t(6540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},p=Object.keys(e);for(a=0;a<p.length;a++)t=p[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)t=p[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),s=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},g=function(e){var n=s(e.components);return a.createElement(l.Provider,{value:n},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,p=e.originalType,l=e.parentName,g=r(e,["components","mdxType","originalType","parentName"]),u=s(t),m=i,d=u["".concat(l,".").concat(m)]||u[m]||y[m]||p;return t?a.createElement(d,o(o({ref:n},g),{},{components:t})):a.createElement(d,o({ref:n},g))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var p=t.length,o=new Array(p);o[0]=m;var r={};for(var l in n)hasOwnProperty.call(n,l)&&(r[l]=n[l]);r.originalType=e,r[u]="string"==typeof e?e:i,o[1]=r;for(var s=2;s<p;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7709:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>y,frontMatter:()=>p,metadata:()=>r,toc:()=>s});var a=t(8168),i=(t(6540),t(5680));const p={id:"prop",title:"@prop"},o=void 0,r={unversionedId:"api/decorators/prop",id:"api/decorators/prop",title:"@prop",description:"Typings:",source:"@site/../docs/api/decorators/prop.md",sourceDirName:"api/decorators",slug:"/api/decorators/prop",permalink:"/typegoose/docs/api/decorators/prop",draft:!1,editUrl:"https://github.com/typegoose/typegoose/edit/master/docs/../docs/api/decorators/prop.md",tags:[],version:"current",frontMatter:{id:"prop",title:"@prop"},sidebar:"docs",previous:{title:"Environment Variables",permalink:"/typegoose/docs/api/environment-variables"},next:{title:"@modelOptions",permalink:"/typegoose/docs/api/decorators/model-options"}},l={},s=[{value:"Single Options",id:"single-options",level:2},{value:"required",id:"required",level:3},{value:"index",id:"index",level:3},{value:"unique",id:"unique",level:3},{value:"default",id:"default",level:3},{value:"_id",id:"_id",level:3},{value:"ref",id:"ref",level:3},{value:"refPath",id:"refpath",level:3},{value:"validate",id:"validate",level:3},{value:"alias",id:"alias",level:3},{value:"select",id:"select",level:3},{value:"get &amp; set",id:"get--set",level:3},{value:"type",id:"type",level:3},{value:"enum",id:"enum",level:3},{value:"addNullToEnum",id:"addnulltoenum",level:3},{value:"discriminators",id:"discriminators",level:3},{value:"innerOptions",id:"inneroptions",level:3},{value:"outerOptions",id:"outeroptions",level:3},{value:"allowMixed",id:"allowmixed",level:3},{value:"Array Options",id:"array-options",level:2},{value:"dim",id:"dim",level:3},{value:"Map Options",id:"map-options",level:2},{value:"String Transform options",id:"string-transform-options",level:2},{value:"lowercase",id:"lowercase",level:3},{value:"uppercase",id:"uppercase",level:3},{value:"trim",id:"trim",level:3},{value:"String Validation options",id:"string-validation-options",level:2},{value:"maxlength",id:"maxlength",level:3},{value:"minlength",id:"minlength",level:3},{value:"match",id:"match",level:3},{value:"Number Validation options",id:"number-validation-options",level:2},{value:"max",id:"max",level:3},{value:"min",id:"min",level:3},{value:"Virtual Populate Options",id:"virtual-populate-options",level:2},{value:"ref",id:"virtual-populate-ref",level:3},{value:"foreignField",id:"foreignfield",level:3},{value:"localField",id:"localfield",level:3},{value:"justOne",id:"justone",level:3},{value:"count",id:"count",level:3},{value:"options",id:"virtual-populate-options-option",level:3},{value:"match",id:"virtual-populate-match",level:3},{value:"PropType",id:"proptype",level:2},{value:"Passthrough Class",id:"passthrough-class",level:2},{value:"Non-Direct",id:"passthrough-nondirect",level:3},{value:"Direct",id:"passthrough-direct",level:3}],g={toc:s},u="wrapper";function y(e){let{components:n,...t}=e;return(0,i.yg)(u,(0,a.A)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Typings:")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"function prop(\n  options?: BasePropOptions | ArrayPropOptions | MapPropOptions | PropOptionsForNumber | PropOptionsForString | VirtualOptions,\n  kind?: PropType\n): PropertyDecorator\n")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Parameters:")),(0,i.yg)("table",null,(0,i.yg)("thead",{parentName:"table"},(0,i.yg)("tr",{parentName:"thead"},(0,i.yg)("th",{parentName:"tr",align:"left"},"Name"),(0,i.yg)("th",{parentName:"tr",align:"center"},"Type"),(0,i.yg)("th",{parentName:"tr",align:"left"},"Description"))),(0,i.yg)("tbody",{parentName:"table"},(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"left"},(0,i.yg)("inlineCode",{parentName:"td"},"options")," ",(0,i.yg)("span",{class:"badge badge--secondary"},"Required")),(0,i.yg)("td",{parentName:"tr",align:"center"},(0,i.yg)("inlineCode",{parentName:"td"},"BasePropOptions")),(0,i.yg)("td",{parentName:"tr",align:"left"},"The Option to set for the following property")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"left"},(0,i.yg)("inlineCode",{parentName:"td"},"kind")),(0,i.yg)("td",{parentName:"tr",align:"center"},(0,i.yg)("a",{parentName:"td",href:"#proptype"},(0,i.yg)("inlineCode",{parentName:"a"},"PropType"))),(0,i.yg)("td",{parentName:"tr",align:"left"},"Overwrite what Kind is used")))),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"@prop")," is used to mark properties to be in the Schema and also set Options of that property."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Any Property that does not have ",(0,i.yg)("inlineCode",{parentName:"p"},"@prop")," on it will not be in the Schema, because typegoose's current approach is that the keys for the schema get defined in ",(0,i.yg)("inlineCode",{parentName:"p"},"@prop"),", unlike ",(0,i.yg)("inlineCode",{parentName:"p"},"class-transformer"),"'s global-",(0,i.yg)("inlineCode",{parentName:"p"},"@Expose")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"@Exclude"),".")),(0,i.yg)("h2",{id:"single-options"},"Single Options"),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Cat {\n  @prop()\n  public name?: string;\n}\n\nclass Cat2 {\n  @prop({ type: () => String }) // explicitly define the Type\n  public name?: string;\n}\n\nclass Cat3 {\n  @prop({ type: () => String }, PropType) // explicitly define the "PropType"\n  public name?: string;\n}\n')),(0,i.yg)("h3",{id:"required"},"required"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Set this to true, if the property is required (best practice is ",(0,i.yg)("inlineCode",{parentName:"p"},"public property!: any"),", note the ",(0,i.yg)("inlineCode",{parentName:"p"},"!"),")",(0,i.yg)("br",{parentName:"p"}),"\n","For more information see the ",(0,i.yg)("a",{parentName:"p",href:"http://mongoosejs.com/docs/api/schematype.html#schematype_SchemaType-required"},"mongoose documentation")),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Something {\n  @prop({ required: true }) // this is now required in the schema\n  public firstName!: string;\n\n  @prop() // by default, a property is not required\n  public lastName?: string; // using the "?" marks the property as optional\n}\n')),(0,i.yg)("h3",{id:"index"},"index"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Create an Index for this Property. Should act like the ",(0,i.yg)("inlineCode",{parentName:"p"},"@index")," class decorator, but without options."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class IndexedClass {\n  @prop({ index: true })\n  public indexedField?: string;\n}\n")),(0,i.yg)("h3",{id:"unique"},"unique"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Create an Index that sets this property to be ",(0,i.yg)("a",{parentName:"p",href:"http://mongoosejs.com/docs/api/schematype.html#schematype_SchemaType-unique"},"unique"),"."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class IndexedClass {\n  @prop({ unique: true }) // implicitly has "index: true"\n  public uniqueId?: string;\n}\n')),(0,i.yg)("h3",{id:"default"},"default"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"any")),(0,i.yg)("p",null,"Set a default, when no value is given at creation time."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Defaulted {\n  @prop({ default: 'hello world' })\n  public upperCase?: string; // mark as optional, because it will be defaulted\n}\n")),(0,i.yg)("p",null,"You may also set the ",(0,i.yg)("inlineCode",{parentName:"p"},"default")," schema option to a function. Mongoose will execute that function and use the return value as the default."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Defaulted {\n  @prop({ required: true })\n  firstName!: string\n  @prop({ required: true })\n  lastName!: string\n  \n  @prop({ \n    default: function (this: DocumentType<Defaulted>) {\n      return `${this.firstName} ${this.lastName}`\n    }\n  })\n  public fullName?: string; // mark as optional, because it will be defaulted\n}\n")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"To have the ",(0,i.yg)("inlineCode",{parentName:"p"},"this")," keyword correctly typed, you have to pass a defined ",(0,i.yg)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters"},"this parameter"),".")),(0,i.yg)("h3",{id:"_id"},"_id"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Set this to ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),", if you want to turn off creating IDs for sub-documents."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Nested {}\n\nclass Parent {\n  @prop({ _id: false })\n  public nest: Nested;\n}\n")),(0,i.yg)("h3",{id:"ref"},"ref"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"Class | string")),(0,i.yg)("p",null,"Set which class to use for Reference (this cannot be inferred by the type)."),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/guides/advanced/reference-other-classes#common-problems"},"Look here where ",(0,i.yg)("inlineCode",{parentName:"a"},"Class")," cannot be used")),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Kitten {\n  @prop()\n  public name?: string;\n}\n\nclass Cat {\n  // single examples\n  @prop({ ref: () => Kitten })\n  public kitten?: Ref<Kitten>;\n  // or\n  @prop({ ref: 'Kitten' })\n  public kitten?: Ref<Kitten>;\n\n  // array examples\n  @prop({ ref: () => Kitten })\n  public kittens?: Ref<Kitten>[];\n  // or\n  @prop({ ref: 'Kitten' })\n  public kittens?: Ref<Kitten>[];\n}\n")),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"'Nested'"),"(as string) form is useful to avoid unintuitive errors due to circular dependencies, such as ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/guides/error-warning-details#ref-is-undefined-e005"},(0,i.yg)("inlineCode",{parentName:"a"},'Option "ref" for "${name}.${key}" is null/undefined! [E005]')),"."),(0,i.yg)("h3",{id:"refpath"},"refPath"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"string")),(0,i.yg)("p",null,"Set which path to look for which Class to use."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Car {}\nclass Shop {}\n\n// in another class\nclass Another {\n  @prop({ required: true, enum: 'Car' | 'Shop' })\n  public which!: string;\n\n  @prop({ refPath: 'which' })\n  public kind?: Ref<Car | Shop>;\n}\n")),(0,i.yg)("h3",{id:"validate"},"validate"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"object")," OR ",(0,i.yg)("inlineCode",{parentName:"p"},"RegExp")," OR ",(0,i.yg)("inlineCode",{parentName:"p"},"(value) => boolean")," OR ",(0,i.yg)("inlineCode",{parentName:"p"},"object[]")," Required options of the object:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"validator"),": ",(0,i.yg)("inlineCode",{parentName:"li"},"(value) => boolean")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"message"),": ",(0,i.yg)("inlineCode",{parentName:"li"},"String"),", the message shows when the validator fails")),(0,i.yg)("p",null,"Set a custom function for validation (must return a boolean)."),(0,i.yg)("p",null,"Example: (For more Examples look at ",(0,i.yg)("a",{parentName:"p",href:"https://mongoosejs.com/docs/api/schematype.html#schematype_SchemaType-validate"},"Mongoose's Documentation"),")"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"// \"maxlength\" already exists as an option, this just shows how to use validate\nclass Validated {\n  @prop({\n    validate: {\n      validator: (v) => {\n        return v.length <= 10;\n      },\n      message: 'value is over 10 characters long!'\n    }\n  })\n  public validated?: string;\n}\n")),(0,i.yg)("h3",{id:"alias"},"alias"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"string")),(0,i.yg)("p",null,"Set an Alias for a property (best practice is to add type information for it)."),(0,i.yg)("p",null,"-> For more information see the ",(0,i.yg)("a",{parentName:"p",href:"https://mongoosejs.com/docs/guide.html#aliases"},"mongoose documentation")),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Dummy {\n  @prop({ alias: 'helloWorld' })\n  public hello: string; // will be included in the DB\n  public helloWorld: string; // will NOT be included in the DB, just for type completion (gets passed as hello in the DB)\n}\n")),(0,i.yg)("h3",{id:"select"},"select"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Set it to ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),", if you want to retrieve data without this property by default",(0,i.yg)("br",{parentName:"p"}),"\n","-> ",(0,i.yg)("a",{parentName:"p",href:"https://mongoosejs.com/docs/api/schematype.html#schematype_SchemaType-select"},"Read more in Mongoose's official documentation")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Dummy {\n  @prop({ select: false })\n  public hello: string;\n}\n")),(0,i.yg)("p",null,"In order to retrieve a prop marked as ",(0,i.yg)("inlineCode",{parentName:"p"},"select: false"),", you must explicitly ask for it:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"// find all in the collection and have the \"hello\" property selected\nconst dummies = await DummyModel.find().select('+hello').exec();\n")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("inlineCode",{parentName:"p"},"select()")," accepts an array as well")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("inlineCode",{parentName:"p"},"select()")," accepts a long string with space as a separator")),(0,i.yg)("h3",{id:"get--set"},"get & set"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"(input) => output")),(0,i.yg)("p",null,"Set getters & setters for fields, it is not virtual.  "),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Both ",(0,i.yg)("inlineCode",{parentName:"p"},"get")," & ",(0,i.yg)("inlineCode",{parentName:"p"},"set")," must be defined all the time, even when just wanting to use one.")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"If the ",(0,i.yg)("a",{parentName:"p",href:"#proptype"},"PropType")," (Primitive / Array / Map) is different from what is got from the reflection, it requires ",(0,i.yg)("strong",{parentName:"p"},"explicit")," setting that it is different")),(0,i.yg)("p",null,"Pre-process string to string:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Dummy {\n  @prop({ set: (val: string) => val.toLowerCase(), get: (val: string) => val })\n  public hello: string;\n}\n")),(0,i.yg)("p",null,"Store string, runtime have string array (string array to string):"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Dummy {\n  // this value is a "string-array" during runtime and is stored in the database as a "primite-string"\n  @prop({ set: (val: string[]) => val.join(\' \'), get: (val: string) => val.split(\' \'), type: String }, PropType.NONE) // requires explicit setting of "PropType"\n  public fullName?: string[];\n}\n')),(0,i.yg)("h3",{id:"type"},"type"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"any | any[] | () => (any | any[])")),(0,i.yg)("p",null,"Overwrite the type generated for the ",(0,i.yg)("inlineCode",{parentName:"p"},"design:type")," reflection."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Dummy {\n  // explicitly set type\n  @prop({ type: String })\n  public version1: string;\n\n  // supports deferred-function style\n  @prop({ type: () => String })\n  public version2: string;\n}\n")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Mongoose initializes arrays with ",(0,i.yg)("inlineCode",{parentName:"p"},"[]")," instead of ",(0,i.yg)("inlineCode",{parentName:"p"},"null")," / ",(0,i.yg)("inlineCode",{parentName:"p"},"undefined"))),(0,i.yg)("p",null,"Example: Arrays (array item types can't be automatically inferred via reflection)"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Dummy {\n  @prop({ type: String })\n  public hello1: string[];\n\n  // supports wrapping type in nested arrays\n  // nested arrays are counted and will be used as option "dim"\n  @prop({ type: [[String]] })\n  public hello2: string[][];\n}\n')),(0,i.yg)("p",null,"(",(0,i.yg)("inlineCode",{parentName:"p"},"type: [[String]]")," is equivalent to ",(0,i.yg)("a",{parentName:"p",href:"#dim"},(0,i.yg)("inlineCode",{parentName:"a"},"type: String, dim: 2")),")"),(0,i.yg)("p",null,"Example: get as ",(0,i.yg)("inlineCode",{parentName:"p"},"string[]"),", save as ",(0,i.yg)("inlineCode",{parentName:"p"},"string")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Dummy {\n  @prop({ set: (val: string[]) => val.join(' '), get: (val: string) => val.split(' '), type: String })\n  public hello: string[];\n}\n")),(0,i.yg)("p",null,"Example: Overwrite type for an enum."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"enum SomeEnum {\n  One,\n  Two\n}\nclass Dummy {\n  @prop({ enum: SomeEnum, type: Number })\n  public enumprop: SomeEnum;\n}\n")),(0,i.yg)("p",null,"Example: Overwrite the inferred type as a last resort."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Dummy {\n  @prop({ type: mongoose.Schema.Types.Mixed }) // used for mongoose / how it is stored to the DB\n  public something: NewableFunction; // used for intellisense / TypeScript\n}\n")),(0,i.yg)("h3",{id:"enum"},"enum"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"TypescriptEnum | (string | number)[]")),(0,i.yg)("p",null,"Only allow values from the enum (best practice is to use TypeScript's enum)."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("inlineCode",{parentName:"p"},"design:type")," will be set to ",(0,i.yg)("inlineCode",{parentName:"p"},"String"),", if the enum is full of Strings, and ",(0,i.yg)("inlineCode",{parentName:"p"},"Number"),", if full of Numbers and ",(0,i.yg)("inlineCode",{parentName:"p"},"Object")," of the enum contains both.")),(0,i.yg)("p",null,"Example for String-Enums:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"enum Gender {\n  MALE = 'male',\n  FEMALE = 'female'\n}\n\nclass Enumed {\n  @prop({ enum: Gender })\n  public gender?: Gender;\n\n  // typegoose enum also supports deferred function\n  @prop({ enum: () => Gender })\n  public gender?: Gender;\n}\n")),(0,i.yg)("p",null,"Example for Number-Enums:",(0,i.yg)("br",{parentName:"p"}),"\n","(since mongoose 5.8 and typegoose 6.2)"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'enum Gender {\n  MALE, // equal to "= 0"\n  FEMALE // equal to "= 1"\n}\n\nclass Enumed {\n  @prop({ enum: Gender })\n  public gender?: Gender;\n\n  // typegoose enum also supports deferred function\n  @prop({ enum: Gender })\n  public gender?: Gender;\n}\n')),(0,i.yg)("p",null,"Known-Issues:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Babel doesn't set the type for enums correctly. They need to be set manually with ",(0,i.yg)("a",{parentName:"li",href:"#type"},"the ",(0,i.yg)("inlineCode",{parentName:"a"},"type")," option")),(0,i.yg)("li",{parentName:"ul"},"If transpiling your code with ",(0,i.yg)("inlineCode",{parentName:"li"},"tsc --transpile-only")," or ",(0,i.yg)("inlineCode",{parentName:"li"},"ts-node -- transpile-only"),", then the ",(0,i.yg)("inlineCode",{parentName:"li"},"--transpile-only")," needs to be removed or the type needs to be set manually with ",(0,i.yg)("a",{parentName:"li",href:"#type"},"the ",(0,i.yg)("inlineCode",{parentName:"a"},"type")," option")," (see ",(0,i.yg)("a",{parentName:"li",href:"/typegoose/docs/guides/known-issues#babel"},"Known-Issues: Babel"),")")),(0,i.yg)("h3",{id:"addnulltoenum"},"addNullToEnum"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Adds ",(0,i.yg)("inlineCode",{parentName:"p"},"null")," to the enum array."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"This doesn't work if the value is ",(0,i.yg)("inlineCode",{parentName:"p"},"required"))),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"enum SomeNumberEnum {\n  one = 1,\n  two = 2\n}\nclass AddNullToEnum {\n  @prop({ enum: SomeNumberEnum, addNullToEnum: true })\n  public value?: SomeNumberEnum;\n}\n\nconst AddNullToEnumModel = getModelForClass(AddNullToEnum);\n\nAddNullToEnumModel.schema.path('value').options.enum === [1, 2, null]; // true\n\n// this is necessary to avoid a validation error\nnew AddNullToEnumModel({ value: null } as AddNullToEnum);\n")),(0,i.yg)("h3",{id:"discriminators"},"discriminators"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"() => [DiscriminatorObject | Class]")),(0,i.yg)("p",null,"Use this function for embedded discriminators."),(0,i.yg)("p",null,"See ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/guides/advanced/nested-discriminators"},"Nested Discriminators")," for a guide on how to use nested Discriminators."),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"A Error is thrown when both this option and the model-option ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/api/decorators/model-options#discriminators"},(0,i.yg)("inlineCode",{parentName:"a"},"discriminators"))," are defined.",(0,i.yg)("br",{parentName:"p"}),"\n","See ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/guides/error-warning-details#duplicate-option-definition-e032"},"Duplicate Option Definition [E032]"),".")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"The ",(0,i.yg)("inlineCode",{parentName:"p"},"discriminatorKey")," (like in the example property ",(0,i.yg)("inlineCode",{parentName:"p"},"type"),") needs to be always set in a newly created document (via ",(0,i.yg)("inlineCode",{parentName:"p"},".create({ type: 'yourKey' })"),", or ",(0,i.yg)("inlineCode",{parentName:"p"},".save()"),")")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"There currently is no typegoose built-in way to get the models the ",(0,i.yg)("inlineCode",{parentName:"p"},"path.discriminator")," call would return, see ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/typegoose/typegoose/issues/744"},"typegoose/typegoose#744"),".")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"[Class]"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"@modelOptions({\n  schemaOptions: {\n    discriminatorKey: 'type'\n  }\n})\nclass Building {\n  @prop({ default: 100 })\n  public width: number;\n\n  @prop({ required: true })\n  public type: string;\n}\n\nclass Garage extends Building {\n  @prop({ default: 10 })\n  public slotsForCars: number;\n}\n\nclass SummerHouse extends Building {\n  @prop({ default: 100 })\n  public distanceToLake: number;\n}\n\nclass Area {\n  @prop({ type: Building, discriminators: () => [Garage, SummerHouse] })\n  public buildings: Building[];\n}\n\nconst AreaModel = getModelForClass(Area);\n\n// then somewhere in an async function\nconst area = await AreaModel.create({});\narea.buildings.push({ type: getName(SummerHouse), distanceToLake: 100 } as SummerHouse);\narea.buildings.push({ type: getName(Garage), slotsForCars: 20 } as Garage);\nawait area.save();\n")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"[DiscriminatorObject]"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"@modelOptions({\n  schemaOptions: {\n    discriminatorKey: 'type'\n  }\n})\nclass Building {\n  @prop({ default: 100 })\n  public width: number;\n\n  @prop({ required: true })\n  public type: string;\n}\n\nclass Garage extends Building {\n  @prop({ default: 10 })\n  public slotsForCars: number;\n}\n\nclass SummerHouse extends Building {\n  @prop({ default: 100 })\n  public distanceToLake: number;\n}\n\nclass Area {\n  @prop({\n    type: Building,\n    discriminators: () => [\n      { type: Garage, value: 'G' },\n      { type: SummerHouse, value: 'S' }\n    ]\n  })\n  public buildings: Building[];\n}\n\nconst AreaModel = getModelForClass(Area);\n\n// then somewhere in an async function\nconst area = await AreaModel.create({});\narea.buildings.push({ type: 'S', distanceToLake: 100 } as SummerHouse);\narea.buildings.push({ type: 'G', slotsForCars: 20 } as Garage);\nawait area.save();\n")),(0,i.yg)("h3",{id:"inneroptions"},"innerOptions"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"innerOptions"),' is used to override options at the "Type" level'),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"Use this only when absolutely necessary and please open a new issue about it")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"This option can be used everywhere ",(0,i.yg)("inlineCode",{parentName:"p"},"mapOptions")," function is called (currently being ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.ARRAY")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.MAP"),")")),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Something {\n  @prop({ required: true })\n  public propy: string[];\n}\n\n// This would be mapped to\n{\n  type: [{ type: String }],\n  required: true\n}\n\n// when using the override\nclass Something {\n  @prop({ innerOptions: { required: true } })\n  public propy: string[];\n}\n\n// This would be mapped to\n{\n  type: [{ type: String, required: true }]\n}\n")),(0,i.yg)("h3",{id:"outeroptions"},"outerOptions"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"outerOptions"),' is used to override options at the "Array" level'),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"Use this only when absolutely necessary and please open a new issue about it")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"This option can be used everywhere ",(0,i.yg)("inlineCode",{parentName:"p"},"mapOptions")," function is called (currently being ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.ARRAY")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.MAP"),")")),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Something {\n  @prop({ maxlength: 1 })\n  public propy: string[];\n}\n\n// This would be mapped to\n{\n  type: [{ type: String, maxlength: 1 }]\n}\n\n// when using the override\nclass Something {\n  @prop({ outerOptions: { maxlength: 1 } })\n  public propy: string[];\n}\n\n// This would be mapped to\n{\n  type: [{ type: String }],\n  maxlength: 1\n}\n")),(0,i.yg)("h3",{id:"allowmixed"},"allowMixed"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"allowMixed")," is used to set a custom ",(0,i.yg)("inlineCode",{parentName:"p"},"warnMixed")," Severity for a specific Property.",(0,i.yg)("br",{parentName:"p"}),"\n","Takes priority over class-wide ",(0,i.yg)("inlineCode",{parentName:"p"},"allowMixed"),"."),(0,i.yg)("p",null,"See ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/api/decorators/model-options#allowmixed"},(0,i.yg)("inlineCode",{parentName:"a"},"modelOptions#allowMixed"))," for all possible variants for the enum."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Something {\n  @prop({ allowMixed: Severity.ERROR, type: () => mongoose.Schema.Types.Mixed })\n  public propy?: any;\n}\n\nbuildSchema(Something); // would throw a "warnMixed" error\n')),(0,i.yg)("h2",{id:"array-options"},"Array Options"),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Option ",(0,i.yg)("inlineCode",{parentName:"p"},"type")," must be provided, otherwise the array will result in ",(0,i.yg)("inlineCode",{parentName:"p"},"Mixed")," ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/typegoose/typegoose/issues/300"},"read typegoose issue #300 for more info"))),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Kitten {\n  @prop()\n  public name?: string;\n}\n\nclass Cat {\n  @prop({ type: () => [Kitten] })\n  public kitten?: Kitten[]; // "[]" or "Array<any>" or "mongoose.Types.Array<any>" or "mongoose.Types.DocumentArray" is needed to be detected as an Array\n}\n\nclass Cat2 {\n  @prop({ type: () => [Kitten] }, PropType.ARRAY) // explicitly define the "PropType"\n  public kitten?: Kitten[];\n}\n')),(0,i.yg)("h3",{id:"dim"},"dim"),(0,i.yg)("p",null,(0,i.yg)("inlineCode",{parentName:"p"},"dim")," is used to set the Dimensions this array should have (for something like a matrix)",(0,i.yg)("br",{parentName:"p"}),"\n","-> needs to be higher than 0",(0,i.yg)("br",{parentName:"p"}),"\n","-> ",(0,i.yg)("strong",{parentName:"p"},"This Option is overridden by using ",(0,i.yg)("inlineCode",{parentName:"strong"},"type () => [Type]"))),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Something {\n  @prop({ dim: 3, type: String })\n  public propy: string[][][];\n  //or\n  @prop({ type: () => [[[String]]] })\n  public propy: string[][][];\n}\n\n// This would be mapped to\n{\n  type: [[[{ type: String }]]]\n}\n")),(0,i.yg)("p",null,"The option ",(0,i.yg)("inlineCode",{parentName:"p"},"dim")," can be omitted when used with the ",(0,i.yg)("inlineCode",{parentName:"p"},"() => [Type]")," syntax (since ",(0,i.yg)("inlineCode",{parentName:"p"},"7.4.0"),"):"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class ArrayInType {\n  @prop({ type: () => [[String]] }) // dim is 2\n  public propy: string[][];\n\n  @prop({ type: () => [String] }) // dim is 1\n  public propy: string[];\n}\n")),(0,i.yg)("h2",{id:"map-options"},"Map Options"),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class SomeMapClass1 {\n  @prop({ type: String })\n  public lookup?: Map<string, string>; // "Map<any, any>" or "mongoose.Types.Map<any>" is needed to be detected as a Map\n}\n\nclass SomeMapClass2 {\n  @prop({ type: () => String }, PropType.MAP) // explicitly define the "PropType"\n  public lookup?: Map<string, string>;\n}\n\n// Extra Examples with different types\n// Example: Primitive-Arrays\nclass SomeMapClass3 {\n  @prop({ type: () => [String] })\n  public lookup?: Map<string, string[]>;\n}\n\n// Example: SubDocuments\nclass Nested {\n  @prop()\n  public dummy?: string;\n}\nclass SomeMapClass3 {\n  @prop({ type: () => Nested, _id: false })\n  public lookup?: Map<string, Nested>;\n}\n\n// Example: SubDocument-Arrays (since 8.1.1)\nclass Nested {\n  @prop()\n  public dummy?: string;\n}\nclass SomeMapClass3 {\n  @prop({ type: () => [Nested], _id: false })\n  public lookup?: Map<string, Nested[]>;\n}\n')),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},(0,i.yg)("inlineCode",{parentName:"p"},"type")," can be Primitives, Primitive-Arrays, SubDocuments(Classes) and SubDocument(Class)-Arrays")),(0,i.yg)("h2",{id:"string-transform-options"},"String Transform options"),(0,i.yg)("h3",{id:"lowercase"},"lowercase"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Set this to ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),", if the value should always be transformed to be lowercased."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class LowerCased {\n  @prop({ lowercase: true })\n  public lowerCase: string; // "HELLO" -> "hello"\n}\n')),(0,i.yg)("h3",{id:"uppercase"},"uppercase"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Set this to ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),", if the value should always be transformed to be UPPERCASE. "),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class UpperCased {\n  @prop({ uppercase: true })\n  public upperCase: string; // "hello" -> "HELLO"\n}\n')),(0,i.yg)("h3",{id:"trim"},"trim"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean")),(0,i.yg)("p",null,"Set this to ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),", if the value should always be trimmed."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},'class Trimmed {\n  @prop({ trim: true })\n  public trim: string; // "   Trim me   " -> "Trim me"\n}\n')),(0,i.yg)("h2",{id:"string-validation-options"},"String Validation options"),(0,i.yg)("h3",{id:"maxlength"},"maxlength"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"number")),(0,i.yg)("p",null,"Sets the maximum length the string can have."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class MaxLengthed {\n  @prop({ maxlength: 10 })\n  public maxlengthed?: string; // the string can only be 10 characters long\n}\n")),(0,i.yg)("h3",{id:"minlength"},"minlength"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"number")),(0,i.yg)("p",null,"Sets the minimum length the string can have (must be above 0)."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class MinLengthed {\n  @prop({ minlength: 10 })\n  public minlengthed?: string; // the string must be at least 10 characters long\n}\n")),(0,i.yg)("h3",{id:"match"},"match"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"RegExp")),(0,i.yg)("p",null,"Sets a Regular Expression for the string must match."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class RegExpString {\n  @prop({ match: /^H/i })\n  public matched?: string;\n}\n")),(0,i.yg)("h2",{id:"number-validation-options"},"Number Validation options"),(0,i.yg)("h3",{id:"max"},"max"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"number")),(0,i.yg)("p",null,"Sets the maximum value the number property can have."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Maxed {\n  @prop({ max: 10 })\n  public maxed?: number; // the value can be at most 10\n}\n")),(0,i.yg)("h3",{id:"min"},"min"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"number")),(0,i.yg)("p",null,"Sets the minimum value the number property can have."),(0,i.yg)("p",null,"Example:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class Mined {\n  @prop({ min: 0 })\n  public mined?: number; // the value must be at least 0\n}\n")),(0,i.yg)("h2",{id:"virtual-populate-options"},"Virtual Populate Options"),(0,i.yg)("p",null,"Options for ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/api/virtuals#virtual-populate"},"Virtual Populate")),(0,i.yg)("h3",{id:"virtual-populate-ref"},"ref"),(0,i.yg)("p",null,"Required: yes, if using virtual populate"),(0,i.yg)("p",null,"For Options and Typings, see normal ",(0,i.yg)("a",{parentName:"p",href:"#ref"},(0,i.yg)("inlineCode",{parentName:"a"},"ref")),"."),(0,i.yg)("h3",{id:"foreignfield"},"foreignField"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"string | DynamicStringFunc<any>"),(0,i.yg)("br",{parentName:"p"}),"\n","Required: yes, if using virtual populate"),(0,i.yg)("p",null,"Set the field to look at in the remote document and be compared with the field set by ",(0,i.yg)("a",{parentName:"p",href:"#localfield"},(0,i.yg)("inlineCode",{parentName:"a"},"localField")),"."),(0,i.yg)("h3",{id:"localfield"},"localField"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"string | DynamicStringFunc<any>"),(0,i.yg)("br",{parentName:"p"}),"\n","Required: yes, if using virtual populate"),(0,i.yg)("p",null,"Set the field to look at in the local document and be compared with the field set by ",(0,i.yg)("a",{parentName:"p",href:"#foreignfield"},(0,i.yg)("inlineCode",{parentName:"a"},"foreignField")),"."),(0,i.yg)("h3",{id:"justone"},"justOne"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean"),(0,i.yg)("br",{parentName:"p"}),"\n","Conflicts with: ",(0,i.yg)("a",{parentName:"p",href:"#count"},(0,i.yg)("inlineCode",{parentName:"a"},"count"))),(0,i.yg)("p",null,"Set whether the query should only return one document instead of a array of documents."),(0,i.yg)("h3",{id:"count"},"count"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"boolean"),(0,i.yg)("br",{parentName:"p"}),"\n","Conflicts with: ",(0,i.yg)("a",{parentName:"p",href:"#justone"},(0,i.yg)("inlineCode",{parentName:"a"},"justOne"))),(0,i.yg)("p",null,"Set whether the query should return a count of found documents instead of the documents themself."),(0,i.yg)("h3",{id:"virtual-populate-options-option"},"options"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"mongoose.QueryOptions")),(0,i.yg)("p",null,"Set custom options to be used in the query for virtual populate."),(0,i.yg)("h3",{id:"virtual-populate-match"},"match"),(0,i.yg)("p",null,"Accepts Type: ",(0,i.yg)("inlineCode",{parentName:"p"},"object | (doc) => object")),(0,i.yg)("p",null,"Set a custom matcher for virtual populate."),(0,i.yg)("a",{name:"whatisit"}),(0,i.yg)("h2",{id:"proptype"},"PropType"),(0,i.yg)("p",null,"This is an Enum to represent what the prop should be, this is in most cases automatically set. It can be overridden in the second parameter of ",(0,i.yg)("inlineCode",{parentName:"p"},"@prop")),(0,i.yg)("p",null,"Full Enum:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"enum PropType {\n  ARRAY,\n  MAP,\n  NONE // default for properties if no Map / Array is detected\n}\n")),(0,i.yg)("p",null,"For Examples, look at:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#single-options"},"Single Options")," - ",(0,i.yg)("inlineCode",{parentName:"li"},"NONE")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#array-options"},"Array Options")," - ",(0,i.yg)("inlineCode",{parentName:"li"},"ARRAY")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"#map-options"},"Map Options")," - ",(0,i.yg)("inlineCode",{parentName:"li"},"MAP"))),(0,i.yg)("h2",{id:"passthrough-class"},"Passthrough Class"),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"It is not recommended to use this class, it should always be another class if nesting, like ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/guides/quick-start-guide/#quick-overview-of-typegoose"},"in the quick-start-guide")," is wanted")),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough"),' class is, like the name implies, is to pass-through a schema definition directly, without "wrapping" it in a ',(0,i.yg)("inlineCode",{parentName:"p"},"new Schema({})")," explicitly."),(0,i.yg)("h3",{id:"passthrough-nondirect"},"Non-Direct"),(0,i.yg)("p",null,"Using the ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough")," class this way will be from mongoose 6.0 onward the same as doing another class (see ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/Automattic/mongoose/issues/7181"},"Mongoose#7181"),").",(0,i.yg)("br",{parentName:"p"}),"\n","Also see the ",(0,i.yg)("a",{parentName:"p",href:"/typegoose/docs/guides/faq#do-all-classes-get-compiled-to-their-own-mongooseschema"},"FAQ ",(0,i.yg)("inlineCode",{parentName:"a"},'Do all Classes get compiled to their own "mongoose.Schema"?')),"."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"It should be noted that using this method no typegoose transformations or warnings will be applied to what is inside ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough.raw")," (like ",(0,i.yg)("inlineCode",{parentName:"p"},"type: () => Class")," will not be translated, it will stay as-is).")),(0,i.yg)("p",null,"There is also a option to set the ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough")," class to ",(0,i.yg)("inlineCode",{parentName:"p"},"direct")," mode (with the second parameter), this will mean that absolutely no typegoose process is applied (everything has to be done manually), see ",(0,i.yg)("a",{parentName:"p",href:"#passthrough-direct"},"Passthrough-Class#Direct"),"."),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.NONE"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class PassthroughNoDirect {\n  @prop()\n  public normalProp?: string;\n\n  @prop({ type: () => new Passthrough({ somePath: String }) })\n  public child?: { somePath: string };\n}\n\n// would be equal to\n\nnew mongoose.Schema({\n  normalProp: {\n    type: String\n  },\n  child: {\n    type: {\n      somePath: String\n    }\n  }\n})\n")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.ARRAY"),":"),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"This was not working before mongoose 6.0.9, see ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/Automattic/mongoose/issues/10750"},"issue #10750"),".")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},'Using this way will throw a "Mixed" warning for property ',(0,i.yg)("inlineCode",{parentName:"p"},"child"),", because at the time where typegoose checks types is way before it being a proper Type.")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class PassthroughNoDirect {\n  @prop({ type: () => new Passthrough({ somePath: String }) })\n  public child?: [{ somePath: string }]\n}\n\n// would be equal to\nnew mongoose.Schema({\n  child: {\n    type: [{\n      somePath: String\n    }]\n  }\n})\n")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.MAP"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class PassthroughNoDirect {\n  @prop({ type: () => new Passthrough({ someProp: String }) })\n  public child?: Map<string, { someProp: string }>;\n}\n\n// would be equal to\nnew mongoose.Schema({\n  child: {\n    type: Map,\n    of: {\n      type: {\n        someProp: String\n      }\n    }\n  }\n})\n")),(0,i.yg)("h3",{id:"passthrough-direct"},"Direct"),(0,i.yg)("p",null,"The option ",(0,i.yg)("inlineCode",{parentName:"p"},"direct")," (second parameter to ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough"),", default ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),"), is used to set assigning the contents of ",(0,i.yg)("inlineCode",{parentName:"p"},"raw")," (first parameter to ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough"),") directly, with no processing on the typegoose side or preceding ",(0,i.yg)("inlineCode",{parentName:"p"},"type:"),"."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"With the option ",(0,i.yg)("inlineCode",{parentName:"p"},"direct")," set to ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),", no other option will be applied (even when defined) (like defining ",(0,i.yg)("inlineCode",{parentName:"p"},"required"),", will have no effect).  "),(0,i.yg)("p",{parentName:"admonition"},"The most obvious one being that no ",(0,i.yg)("inlineCode",{parentName:"p"},"type:")," will be in-front of what ",(0,i.yg)("inlineCode",{parentName:"p"},"Passthrough")," holds.")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.NONE"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class PassthroughWithDirect {\n  @prop({ type: () => new Passthrough({ somePath: String }, true) })\n  public child?: { somePath: string; };\n}\n\n// would be equal to\n\nnew mongoose.Schema({\n  child: {\n    somePath: String\n  }\n})\n")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.ARRAY"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class PassthroughWithDirect {\n  @prop({ type: () => new Passthrough([{ somePath: String }], true) })\n  public child?: [{ somePath: string; }];\n}\n\n// would be equal to\n\nnew mongoose.Schema({\n  child: [{ somePath: String }]\n})\n")),(0,i.yg)("p",null,"Example for ",(0,i.yg)("inlineCode",{parentName:"p"},"PropType.MAP"),":"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-ts"},"class PassthroughWithDirect {\n  @prop({ type: () => new Passthrough({ type: Map, of: { somePath: String } }, true) })\n  public child?: Map<string, { somePath: string }>;\n}\n\n// would be equal to\n\nnew mongoose.Schema({\n  child: {\n    type: Map,\n    of: {\n      somePath: String\n    }\n  }\n})\n")))}y.isMDXComponent=!0}}]);